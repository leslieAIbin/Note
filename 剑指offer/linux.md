---
typora-root-url: /images
---

# Linux

# Linux体系结构

![](/25.png)

体系结构主要分为用户态（用户上层活动）和内核态。

Linux启动时会先启动**内核**即Kernel。内核本质是一段管理计算机硬件设备的程序，包括cpu、内存空间、硬盘接口、网络接口等等。所有计算机操作都要通过内核传递给硬件。

用户态即上层应用程序的活动空间。应用程序的执行必须依托内核提供的资源，包括cpu资源、存储资源、IO资源等。为了使上层应用访问到这些资源，内核必须为上层应用提供访问的接口，即**系统调用**，是一种不能再简化的操作，类似于原子操作。一个操作系统的功能可以看作系统调用组合的结果。一个操作系统不可能做出超越系统调用的动作。

**公共函数库**实现对系统调用的封装，将简单的业务逻辑接口呈现给用户，方便用户调用。简单操作直接调用系统调用来访问资源，复杂操作借助库函数实现。

**Shell**本质上是命令解释器，下通系统调用，上通应用程序，通常充当胶水的角色。没有图形界面之前，Shell充当用户界面，当用户运行某些应用的时候，通过Shell输入命令，已建立运行程序。Shell是可编程的，可以执行符合Shell语法的文本，这样的文本称为Shell脚本。Shell语句对系统调用做了一层封装，为了方便用户和系统交互，一般一个Shell对应一个终端，终端是一个硬件设备，呈现给用户的是一个图形化窗口。

## shell常用指令

uname -a 查看系统信息

which ls 在哪个目录

查询目录下的文件：ls

查看文件内容：cat 文件名、less 文件名、more 文件名

编辑文件：vi、vim

ps：用来查看当前运行的**进程状态**，一次性查看。如果需要动态连续结果使用 top。

df：显示**磁盘空间**使用情况。获取硬盘被占用了多少空间，目前还剩下多少空间等信息。

du：对文件和目录磁盘使用的空间的查看。

free：显示系统**内存**使用情况，包括物理内存、交互区内存(swap)和内核缓冲区内存。

netstat：显示各种**网络**相关信息。

chmod：控制文件或目录的**访问权限**。该命令有两种用法：一种是包含字母和操作符表达式的文字设定法；另一种是包含数字的数字设定法。

目前用的Shell是Linux主流中的bash，输入指令echo $SHELL查看当前Shell的版本。cat /etc/shells查看本机器支持的Shell版本。chsh -s Shell路径，切换到指定的Shell（chsh即change shell）。

[Linux常用命令](https://www.runoob.com/w3cnote/linux-common-command-2.html)

# 查找特定文件

**find**在指定目录下查找文件。

find 路径名 -name "XX.java"：精确查找文件

find 路径名 -name "XX*"：模糊查找文件

find 路径名 -iname "XX*"：不区分文件名大小写去查找文件

man find：更多关于find指令的说明

（/是指根目录，所有目录最顶层的目录

~是当前用户的主目录，如果是root用户就是/root/目录，如果是其他用户/home/下用户名命名的目录）

 全局查找 find / --name "xxxx"

当前目录下 find ~ --name ""

# 检索文件内容

**grep**查找文件里符合条件的字符串，使用正则表达式搜索文本并把匹配的行打印出来。

grep “要查找的文本内容” XX*：以XX打头的所有文件中查找包含要查找内容的行，grep只会筛选出目标字符串所在的行。

不指定路径，grep从标准输入设备读取数据，系统等待输入，直到输入了要查找的文本内容。



grep -o “正则表达式”：筛选出符合正则表达式的内容。

grep -v "文本内容“：过滤掉包含相关字符串的内容。

**管道操作符 |** 将前面一个指令传出的正确输出信息即stdoutput的信息，传递给下一个指令作为标准的输入即stdinput

使用管道注意的要点：

1）管道命令只处理前一个命令正确的输出，不处理错误的输出。

2）右边命令必须能够接收标准输入流，否则传递过程中数据会被抛弃。

常用来接收数据管道的命令有sed、awk、grep、cut、head、top、less、more、wc、join、sort、split等



找相关内容的文件 并定位

grep  "moo"  target* 

target开头的文件 内容里有moo的、



find ~ | grep "hello"

find ~会给后面的指令提供文件夹地址